# ğŸ“‹ BACKLOG - personal_fin (PFM)

> Sistema de Gerenciamento de FinanÃ§as Pessoais
> Stack: Laravel 12 + Livewire 4 + Tailwind CSS + PostgreSQL

---

## ğŸ¯ SPRINTS

---

### ï¿½ SPRINT 1: Fundamentos & AutenticaÃ§Ã£o
**Status:** âœ… Em andamento
**Objetivo:** Setup + Auth + Design System Base

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 1.1 | Setup Laravel 12 + Docker | ğŸ”´ CRÃTICA | âœ… ConcluÃ­do |
| 1.2 | Laravel Breeze (Auth) | ğŸ”´ CRÃTICA | âœ… ConcluÃ­do |
| 1.3 | Migration: profiles | ğŸ”´ CRÃTICA | âœ… ConcluÃ­do |
| 1.4 | Migration: categories | ğŸ”´ CRÃTICA | âœ… ConcluÃ­do |
| 1.5 | Migration: subcategories | ğŸ”´ CRÃTICA | âœ… ConcluÃ­do |
| 1.6 | Models: Profile, Category, Subcategory | ğŸ”´ CRÃTICA | âœ… ConcluÃ­do |
| 1.7 | Controllers + Routes REST | ğŸŸ¡ MÃ©dia | âœ… ConcluÃ­do |
| 1.8 | Seeders categorias PT-BR | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 1.9 | Design System (Glassmorphism + Dark Mode) | ğŸ”´ CRÃTICA | â³ Pendente |
| 1.10 | Layout base com Bottom Navigation | ğŸ”´ CRÃTICA | â³ Pendente |

---

### ï¿½ SPRINT 2: Dashboard MVP
**Status:** â³ Pendente
**Objetivo:** Dashboard com UI profissional + dados mockados

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 2.1 | Layout Livewire + Tailwind | ğŸ”´ CRÃTICA | â³ Pendente |
| 2.2 | Bottom Navigation Mobile | ğŸ”´ CRÃTICA | â³ Pendente |
| 2.3 | Card Saldo/Receitas/Despesas (Glass) | ğŸ”´ CRÃTICA | â³ Pendente |
| 2.4 | Cards expansÃ­veis (projetado/futuro) | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 2.5 | Mock data para demonstraÃ§Ã£o | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 2.6 | Toggle Dark/Light Mode | ğŸŸ¡ MÃ©dia | â³ Pendente |

---

### ï¿½ SPRINT 3: Contas & CartÃµes
**Status:** â³ Pendente
**Objetivo:** GestÃ£o de contas bancÃ¡rias e cartÃµes

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 3.1 | Migration: accounts | ğŸ”´ CRÃTICA | â³ Pendente |
| 3.2 | Migration: cards | ğŸ”´ CRÃTICA | â³ Pendente |
| 3.3 | Model: Account, Card | ğŸ”´ CRÃTICA | â³ Pendente |
| 3.4 | CRUD Accounts API + UI | ğŸ”´ CRÃTICA | â³ Pendente |
| 3.5 | CRUD Cards API + UI | ğŸ”´ CRÃTICA | â³ Pendente |
| 3.6 | Dashboard Cards (estilo fÃ­sico) | ğŸ”´ CRÃTICA | â³ Pendente |
| 3.7 | Fatura do cartÃ£o (por perÃ­odo) | ğŸŸ¡ MÃ©dia | â³ Pendente |

---

### ï¿½ SPRINT 4: TransaÃ§Ãµes Core
**Status:** â³ Pendente
**Objetivo:** Cadastro e listagem de transaÃ§Ãµes

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 4.1 | Migration: transactions | ğŸ”´ CRÃTICA | â³ Pendente |
| 4.2 | Model: Transaction | ğŸ”´ CRÃTICA | â³ Pendente |
| 4.3 | Transactions API (CRUD) | ğŸ”´ CRÃTICA | â³ Pendente |
| 4.4 | Listagem com filtros (data/conta/cartÃ£o) | ğŸ”´ CRÃTICA | â³ Pendente |
| 4.5 | FormulÃ¡rio de transaÃ§Ã£o | ğŸ”´ CRÃTICA | â³ Pendente |
| 4.6 | Carrossel Ano/MÃªs | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 4.7 | Modal de Quick Add (+) | ğŸ”´ CRÃTICA | â³ Pendente |

---

### ï¿½ SPRINT 5: TransaÃ§Ãµes AvanÃ§adas
**Status:** â³ Pendente
**Objetivo:** Parcelamento e recorrÃªncia

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 5.1 | Migration: installments | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 5.2 | Model: Installment | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 5.3 | TransaÃ§Ã£o parcelada | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 5.4 | TransaÃ§Ã£o recorrente | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 5.5 | Cron jobs para recorrÃªncias | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 5.6 | Listagem de parcelas | ğŸŸ¡ MÃ©dia | â³ Pendente |

---

### ï¿½ SPRINT 6: Metas & Limites
**Status:** â³ Pendente
**Objetivo:** Sistema de metas e alertas de limite

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 6.1 | Migration: goals | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 6.2 | Migration: limits | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 6.3 | Model: Goal, Limit | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 6.4 | Goals CRUD | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 6.5 | Barra de progresso | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 6.6 | Limits por categoria | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 6.7 | Alertas (80% limite) | ğŸŸ¡ MÃ©dia | â³ Pendente |

---

### ï¿½ SPRINT 7: RelatÃ³rios & Insights
**Status:** â³ Pendente
**Objetivo:** RelatÃ³rios e insights inteligentes

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 7.1 | RelatÃ³rio por categoria | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 7.2 | RelatÃ³rio por perÃ­odo | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 7.3 | RelatÃ³rio por cartÃ£o | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 7.4 | RelatÃ³rio por conta | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 7.5 | GrÃ¡ficos (Chart.js/Recharts) | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 7.6 | Insights inteligente | ğŸŸ¢ Baixa | â³ Pendente |
| 7.7 | Export JSON/CSV | ğŸŸ¢ Baixa | â³ Pendente |

---

### ï¿½ SPRINT 8: Investimentos & EmprÃ©stimos
**Status:** â³ Pendente

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 8.1 | Migration: investments | ğŸŸ¢ Baixa | â³ Pendente |
| 8.2 | Migration: loans | ğŸŸ¢ Baixa | â³ Pendente |
| 8.3 | Model: Investment, Loan | ğŸŸ¢ Baixa | â³ Pendente |
| 8.4 | CRUD Investments | ğŸŸ¢ Baixa | â³ Pendente |
| 8.5 | CRUD Loans | ğŸŸ¢ Baixa | â³ Pendente |

---

### ï¿½ SPRINT 9: Perfil & ConfiguraÃ§Ãµes
**Status:** â³ Pendente

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| 9.1 | Dados do usuÃ¡rio (Avatar, Badge) | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 9.2 | ConfiguraÃ§Ãµes de notificaÃ§Ãµes | ğŸŸ¢ Baixa | â³ Pendente |
| 9.3 | Gerenciamento de categorias (UI) | ğŸŸ¡ MÃ©dia | â³ Pendente |
| 9.4 | Feedback e problemas | ğŸŸ¢ Baixa | â³ Pendente |
| 9.5 | Export/Import dados | ğŸŸ¢ Baixa | â³ Pendente |

---

---

### ğŸ› ï¸ FEATURE: AdequaÃ§Ã£o e Saneamento de Rotas
**Origem:** Varredura diagnÃ³stica realizada em 2026-02-27
**Status:** â³ Pendente
**Objetivo:** Corrigir rotas quebradas, eliminar rotas desnecessÃ¡rias e aplicar isolamento por usuÃ¡rio nos controllers

#### Contexto

Varredura completa identificou **68 rotas registradas**, sendo:
- 49 funcionais
- 10 que causam erro 500
- 3 alertas de seguranÃ§a (queries sem filtro por usuÃ¡rio)

---

#### Tarefas

| # | Tarefa | Prioridade | Status |
|---|--------|------------|--------|
| R.1 | Remover rotas `*/edit` de todos os resources (nÃ£o usadas no Livewire) | ğŸ”´ CRÃTICA | â³ Pendente |
| R.2 | Adicionar mÃ©todo `edit()` ou excluir rota em `AccountController` | ğŸ”´ CRÃTICA | â³ Pendente |
| R.3 | Adicionar mÃ©todos `create()` e `edit()` ou excluir rotas em `CardController` | ğŸ”´ CRÃTICA | â³ Pendente |
| R.4 | Adicionar mÃ©todo `edit()` ou excluir rota em `TransactionController` | ğŸ”´ CRÃTICA | â³ Pendente |
| R.5 | Criar views `categories.create`, `categories.show`, `categories.edit` ou excluir rotas | ğŸ”´ CRÃTICA | â³ Pendente |
| R.6 | Criar views de subcategorias ou excluir rotas GET de subcategory | ğŸŸ¡ MÃ©dia | â³ Pendente |
| R.7 | Corrigir `AccountController::index` â€” filtrar por usuÃ¡rio autenticado (sem `Account::all()`) | ğŸ”´ CRÃTICA | â³ Pendente |
| R.8 | Corrigir `CardController::index` â€” filtrar por usuÃ¡rio autenticado | ğŸ”´ CRÃTICA | â³ Pendente |
| R.9 | Auditar todos os controllers: garantir isolamento por `profile_id` do usuÃ¡rio autenticado | ğŸ”´ CRÃTICA | â³ Pendente |
| R.10 | Adicionar Policy ou middleware de autorizaÃ§Ã£o por recurso (account, card, transaction) | ğŸŸ¡ MÃ©dia | â³ Pendente |
| R.11 | Definir estratÃ©gia: rotas sÃ£o REST-only (JSON) ou hÃ­bridas (HTML + Livewire)? | ğŸ”´ CRÃTICA | â³ Pendente |
| R.12 | Adicionar testes de integraÃ§Ã£o para as rotas crÃ­ticas (auth, accounts, transactions) | ğŸŸ¡ MÃ©dia | â³ Pendente |

---

#### Plano de AdequaÃ§Ã£o

**DecisÃ£o arquitetural a tomar (R.11):**

> O projeto usa Livewire para o frontend. Isso significa que a maioria das rotas `GET */create` e `GET */edit` nÃ£o sÃ£o necessÃ¡rias como rotas standalone â€” elas serÃ£o componentes Livewire. A recomendaÃ§Ã£o Ã©:

```php
// OpÃ§Ã£o A â€” REST puro (recomendado para Livewire):
Route::resource('accounts', AccountController::class)
    ->except(['create', 'edit']);

// OpÃ§Ã£o B â€” Manter rotas HTML para fallback:
// manter como estÃ¡, mas implementar as views e mÃ©todos faltantes
```

**CorreÃ§Ã£o de seguranÃ§a (R.7, R.8, R.9):**

```php
// ERRADO â€” expÃµe dados de todos os usuÃ¡rios:
$accounts = Account::all();

// CORRETO â€” isolado por profile do usuÃ¡rio autenticado:
$profile = auth()->user()->profiles()->first();
$accounts = Account::where('profile_id', $profile->id)->get();
```

**Isolamento por recurso (R.10):**
- Criar `AccountPolicy`, `CardPolicy`, `TransactionPolicy`
- Registrar em `AuthServiceProvider`
- Usar `$this->authorize('view', $account)` nos controllers

---

## ğŸ“Š RESUMO DE PRIORIDADES

| Sprint | Escopo | Tarefas | Status |
|--------|--------|---------|--------|
| 1 | Fundamentos & Auth | 10 | ğŸ”´ Em andamento |
| 2 | Dashboard MVP | 6 | â³ Pendente |
| 3 | Contas & CartÃµes | 7 | â³ Pendente |
| 4 | TransaÃ§Ãµes Core | 7 | â³ Pendente |
| 5 | TransaÃ§Ãµes AvanÃ§adas | 6 | â³ Pendente |
| 6 | Metas & Limites | 7 | â³ Pendente |
| 7 | RelatÃ³rios | 7 | â³ Pendente |
| 8 | Investimentos | 5 | â³ Pendente |
| 9 | Perfil & Config | 5 | â³ Pendente |
| **R** | **AdequaÃ§Ã£o de Rotas** | **12** | **â³ Pendente** |

---

## ğŸ·ï¸ LEGENDA

| SÃ­mbolo | Significado |
|---------|-------------|
| ğŸ”´ CRÃTICA | Essential para MVP |
| ğŸŸ¡ MÃ©dia | Importante |
| ğŸŸ¢ Baixa | Fase futura |
| âœ… ConcluÃ­do | Pronto |
| â³ Pendente | A fazer |
| ğŸš§ Em andamento | Em progresso |

---

## ğŸ”„ FLUXO DE TRABALHO

1. **Selecionar Sprint**: Escolher sprint do backlog
2. **Skill TDD**: Usar `aidev` com skill TDD para implementar
3. **CÃ³digo**: Escrever teste â†’ cÃ³digo â†’ refatorar
4. **RevisÃ£o**: Code review antes de marcar concluÃ­do
5. **PrÃ³ximo**: AvanÃ§ar para prÃ³xima tarefa

---

**VersÃ£o:** 1.1
**Ãšltima atualizaÃ§Ã£o:** 2026-02-27
**ResponsÃ¡vel:** AI Dev Agent
